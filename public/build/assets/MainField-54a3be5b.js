import{q as A,r as h,j as e}from"./app-d24c5eb2.js";import{B as E}from"./Breadcrumb-fef84490.js";import{l as H}from"./breadcrumbContent-e73bf562.js";import{F as l}from"./FieldGroup-de18e160.js";import{T as m}from"./TextInput-65f7bbdd.js";import{S as d}from"./react-select.esm-48787787.js";import{D as f,F as v}from"./DateFormatFlatpickr-e71564aa.js";import{c as j}from"./convertOptions-49a86ad9.js";import{a as R}from"./addDotsCurrency-66005202.js";import"./trash-2-1aa80db0.js";import"./createLucideIcon-50db9300.js";function V(){return["Ole Suites Hotel","Ole Suites Cottage","Ole Suites Hotel & Cottage","RUKUN"].map(o=>({value:o,label:o}))}function Y({data:n,setData:o,errors:i,pageName:u,selectOption:C,readOnly:c=!1}){const{user:k}=A().props.auth,[P,p]=h.useState(n.phone),[w,S]=h.useState(n.address),[b,x]=h.useState([]),{organizations:g,events:y,rooms:N}=C,D=async a=>{var r;const t=a.value;o(s=>({...s,organization:t,organizationSelected:a,contact:"",contactSelected:""})),p(""),x([]),S((r=g.find(s=>s.id===t))==null?void 0:r.address);try{const s=await axios.get(route("contactOrganization"),{params:{organizationId:t}});s.status===200&&x(s.data)}catch(s){console.error(s,"There's something was wrong when organization change")}},T=a=>{var r;const t=a.value;o(s=>({...s,contact:t,contactSelected:a})),p((r=b.find(s=>s.id===t))==null?void 0:r.phone)},z=a=>{o(t=>({...t,event:a.value,eventSelected:a}))},q=a=>{const t=a.map(r=>r.value).join(", ");o(r=>({...r,hotel:t,hotelSelected:a}))},I=a=>{o(t=>({...t,room:a.value,roomSelected:a}))},_=a=>{const t=a.target.value;/^[0-9]{0,10}$/.test(t)&&o("attendance",t?parseInt(t,10):"")},F=a=>{const t=a.target.value.replace(/\./g,"");/^[0-9.]{0,12}$/.test(t)&&o(r=>({...r,deposit:t?parseInt(t,10):"",depositValue:t?R(parseInt(t,10)):""}))},$=a=>{o(t=>({...t,payment:a.value,paymentSelected:a}))};return e.jsxs("div",{className:"content-box mb-2",children:[e.jsx(E,{title:`${u} Confirm Letter`,pageName:u,prevPage:H}),n.code&&e.jsx(l,{label:"Code",name:"code",children:e.jsx(m,{name:"code",value:n.code,isDisabled:!0,className:"mt-1 block w-full"})}),e.jsx(l,{label:"Sales",name:"sales",children:e.jsx(m,{name:"sales",value:k.fullname,isDisabled:!0,className:"mt-1 block w-full"})}),e.jsx(l,{label:"Organization",name:"organization",error:i.organization,isPrimary:!0,children:e.jsx(d,{options:j(g),value:n.organizationSelected,onChange:D,className:"mt-1 block w-full",required:!0,menuPortalTarget:document.body,menuPosition:"fixed",isDisabled:c})}),e.jsx(l,{label:"Address",name:"address",children:e.jsx(m,{name:"address",value:w,isDisabled:!0,className:"mt-1 block w-full",placeholder:"Organization address..."})}),e.jsx(l,{label:"PIC",name:"pic",error:i.contact,isPrimary:!0,children:e.jsx(d,{options:j(b),value:n.contactSelected,onChange:T,className:"mt-1 block w-full",required:!0,menuPortalTarget:document.body,menuPosition:"fixed",isDisabled:c})}),e.jsx(l,{label:"Phone",name:"phone",children:e.jsx(m,{name:"phone",value:P,isDisabled:!0,className:"mt-1 block w-full",placeholder:"PIC phone..."})}),e.jsx(l,{label:"Check In",name:"check_in",error:i.check_in,isPrimary:!0,children:e.jsx(f,{minDate:u==="Create"?new Date:"",value:n.check_in,onChange:a=>{const t=v(a);o("check_in",t=="1970-01-01"?"":t)},className:"mt-1 block w-full",name:"check_in",placeholder:"Check In...",required:!0,withTime:!1,isDisable:c})}),e.jsx(l,{label:"Check Out",name:"check_out",error:i.check_out,isPrimary:!0,children:e.jsx(f,{minDate:u==="Create"?new Date:"",value:n.check_out,onChange:a=>{const t=v(a);o("check_out",t=="1970-01-01"?"":t)},className:"mt-1 block w-full",name:"check_in",placeholder:"Check Out...",required:!0,withTime:!1,isDisable:c})}),e.jsx(l,{label:"Event",name:"event",error:i.event,isPrimary:!0,children:e.jsx(d,{options:y,value:n.eventSelected,onChange:z,className:"mt-1 block w-full",required:!0,menuPortalTarget:document.body,menuPosition:"fixed",isDisabled:c})}),e.jsx(l,{label:"Hotel",name:"hotel",error:i.hotel,isPrimary:!0,children:e.jsx(d,{isMulti:!0,options:V(),value:n.hotelSelected,onChange:q,className:"mt-1 block w-full",required:!0,menuPortalTarget:document.body,menuPosition:"fixed",isDisabled:c})}),e.jsx(l,{label:"Room",name:"room",error:i.room,isPrimary:!0,children:e.jsx(d,{options:N,value:n.roomSelected,onChange:I,className:"mt-1 block w-full",required:!0,menuPortalTarget:document.body,menuPosition:"fixed",isDisabled:c})}),e.jsx(l,{label:"Attendance",name:"attendance",error:i.attendance,isPrimary:!0,required:!0,children:e.jsx(m,{name:"attendance",type:"text",value:n.attendance||"",className:"mt-1 block w-full",required:!0,autoComplete:"attendance",placeholder:"Estimated Attendance...",pattern:"^[0-9]{0,10}$",onChange:_,isDisabled:c})}),e.jsx(l,{label:"Payment",name:"payment",error:i.payment,isPrimary:!0,children:e.jsx(d,{options:[{value:"cash",label:"Cash"},{value:"transfer",label:"Transfer"}],value:n.paymentSelected,onChange:$,className:"mt-1 block w-full",required:!0,menuPortalTarget:document.body,menuPosition:"fixed",isDisabled:c})}),e.jsxs("div",{className:"w-full",children:[e.jsx("label",{className:"form--label",htmlFor:"deposit",children:"Deposit"}),e.jsxs("div",{className:"flex items-end",children:[e.jsx("span",{className:"rounded-l-md px-3 py-2 bg-gray-100 border border-gray-300 text-gray-500",children:"Rp."}),e.jsx(l,{error:i.deposit,className:"flex-1 !mb-0",children:e.jsx(m,{id:"deposit",name:"deposit",className:"mt-1 block w-full !rounded-l-none !rounded-r-md",value:n.depositValue||"",placeholder:"Deposit...",onChange:F,pattern:"^[0-9.]{0,12}$",isDisabled:c})})]})]})]})}export{Y as default};

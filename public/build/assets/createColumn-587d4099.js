import{q as b,j as t,a as h,y as f}from"./app-d24c5eb2.js";import{P as w,B as g}from"./ButtonDelete-cca10017.js";import{S as p,w as j}from"./confirmDelete-fbff4c54.js";import{E as C}from"./eye-064fcbb4.js";import{c as i}from"./createLucideIcon-50db9300.js";import"./trash-2-1aa80db0.js";/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M=i("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N=i("HeartCrack",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}],["path",{d:"m12 13-1-1 2-2-3-3 2-2",key:"xjdxli"}]]);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B=i("Loader",[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]]);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D=i("PartyPopper",[["path",{d:"M5.8 11.3 2 22l10.7-3.79",key:"gwxi1d"}],["path",{d:"M4 3h.01",key:"1vcuye"}],["path",{d:"M22 8h.01",key:"1mrtc2"}],["path",{d:"M15 2h.01",key:"1cjtqr"}],["path",{d:"M22 20h.01",key:"1mrys2"}],["path",{d:"m22 2-2.24.75a2.9 2.9 0 0 0-1.96 3.12c.1.86-.57 1.63-1.45 1.63h-.38c-.86 0-1.6.6-1.76 1.44L14 10",key:"hbicv8"}],["path",{d:"m22 13-.82-.33c-.86-.34-1.82.2-1.98 1.11c-.11.7-.72 1.22-1.43 1.22H17",key:"1i94pl"}],["path",{d:"m11 2 .33.82c.34.86-.2 1.82-1.11 1.98C9.52 4.9 9 5.52 9 6.23V7",key:"1cofks"}],["path",{d:"M11 13c1.93 1.93 2.83 4.17 2 5-.83.83-3.07-.07-5-2-1.93-1.93-2.83-4.17-2-5 .83-.83 3.07.07 5 2Z",key:"4kbmks"}]]);function z(o){return new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0,maximumFractionDigits:0}).format(o)}async function P({code:o,status:n}){const r=j(p);try{const s=await r.fire({title:"Update Status?",html:`Decide whether this <b>${o}</b> is a won, lost or a progress!`,icon:"question",showCloseButton:!0,showConfirmButton:!0,showCancelButton:!0,showDenyButton:!0,confirmButtonText:"Won",denyButtonText:"Lost",cancelButtonText:"Progress",confirmButtonColor:"#f97316",denyButtonColor:"#9f1239",cancelButtonColor:"#64748b"});return s.isConfirmed&&n!="won"?"won":s.isDenied&&n!="lost"?"lost":s.dismiss===p.DismissReason.cancel&&n!="progress"?"progress":null}catch(s){return console.error("SweetAlert error:",s),!1}}const _=()=>{const{permissions:o}=b().props.auth,n=o.includes("letter_show"),r=o.includes("letter_edit"),s=o.includes("letter_export"),l=o.includes("letter_delete"),u={progress:{color:"bg-slate-500",icon:t.jsx(B,{className:"inline-block mb-[3px]",strokeWidth:3,size:18})},won:{color:"bg-orange-500",icon:t.jsx(D,{className:"inline-block mb-[3px]",strokeWidth:3,size:18})},lost:{color:"bg-rose-800",icon:t.jsx(N,{className:"inline-block mb-[3px]",strokeWidth:3,size:18})}},y=async({code:e,status:a,letter:c})=>{const m=await P({code:e,status:a});if(m){const x=route("confirm-letter.progress",{letter:c})+`?status=${m}`;f.patch(x)}},d=[{key:"id",label:"No.",classHead:"table--number",classBody:"text-center",render:(e,a)=>a+1},{key:"status",label:"",render:e=>{const{color:a,icon:c}=u[e.status];return t.jsx("span",{className:`p-2 rounded text-white cursor-pointer ${a}`,onClick:r?()=>y({code:e.code,status:e.status,letter:e}):null,style:{cursor:r?"pointer":"not-allowed"},children:c})}},{key:"code",label:"Code"},{key:"check_in",label:"Check In"},{key:"organization",label:"Organization"},{key:"pic",label:"PIC"},{key:"sales",label:"Sales"},{key:"amount",label:"Amount",render:e=>z(e.amount)}],k={key:"actions",label:"Action",classHead:"table--action",classBody:"table--action",render:e=>t.jsxs("div",{className:"flex flex-row gap-2 items-center",children:[n&&t.jsx(h,{href:route("confirm-letter.show",e.id),className:"py-2 px-3 rounded-md bg-success text-white",children:t.jsx(C,{className:"inline-block mb-1",strokeWidth:3,size:16})}),s&&t.jsx("a",{target:"_blank",href:route("confirm-letter.export",e.id),className:"py-2 px-3 rounded-md bg-sky-500 text-white",children:t.jsx(M,{className:"inline-block mb-1",strokeWidth:3,size:16})}),r&&t.jsx(h,{href:route("confirm-letter.edit",e.id),className:"py-2 px-3 rounded-md bg-warning text-white",children:t.jsx(w,{className:"inline-block mb-1",strokeWidth:3,size:16})}),l&&e.canDelete&&t.jsx(g,{id:e.id,name:e.code,routeName:"confirm-letter.destroy",className:"!bg-danger !ml-0 text-white py-2 px-3 rounded-md",withText:!1})]})};return(r||l)&&d.push(k),d};export{_ as default};

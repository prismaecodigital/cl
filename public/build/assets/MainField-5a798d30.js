import{q as F,r as h,j as e}from"./app-17e9f1c4.js";import{B as A}from"./Breadcrumb-ffbd4dda.js";import{l as E}from"./breadcrumbContent-e73bf562.js";import{F as l}from"./FieldGroup-647263f2.js";import{T as m}from"./TextInput-27379eee.js";import{S as u}from"./react-select.esm-915f92dd.js";import{D as g,F as v}from"./DateFormatFlatpickr-dcaeceb1.js";import{c as j}from"./convertOptions-49a86ad9.js";import"./trash-2-56e0bb0f.js";import"./createLucideIcon-29b2380b.js";function O({data:n,setData:s,errors:r,pageName:d,selectOption:k,readOnly:c=!1}){const{user:C}=F().props.auth,[P,b]=h.useState(n.phone),[w,S]=h.useState(n.address),[p,x]=h.useState([]),{organizations:f,events:y,rooms:z}=k,D=async t=>{var i;const a=t.value;s(o=>({...o,organization:a,organizationSelected:t,contact:"",contactSelected:""})),b(""),x([]),S((i=f.find(o=>o.id===a))==null?void 0:i.address);try{const o=await axios.get(route("contactOrganization"),{params:{organizationId:a}});o.status===200&&x(o.data)}catch(o){console.error(o,"There's something was wrong when organization change")}},T=t=>{var i;const a=t.value;s(o=>({...o,contact:a,contactSelected:t})),b((i=p.find(o=>o.id===a))==null?void 0:i.phone)},q=t=>{s(a=>({...a,event:t.value,eventSelected:t}))},N=t=>{s(a=>({...a,room:t.value,roomSelected:t}))},_=t=>{const a=t.target.value;/^[0-9]{0,10}$/.test(a)&&s("attendance",a?parseInt(a,10):"")},I=t=>{s(a=>({...a,payment:t.value,paymentSelected:t}))};return e.jsxs("div",{className:"content-box mb-2",children:[e.jsx(A,{title:`${d} Confirm Letter`,pageName:d,prevPage:E}),n.code&&e.jsx(l,{label:"Code",name:"code",children:e.jsx(m,{name:"code",value:n.code,isDisabled:!0,className:"mt-1 block w-full"})}),e.jsx(l,{label:"Organization",name:"organization",error:r.organization,isPrimary:!0,children:e.jsx(u,{options:j(f),value:n.organizationSelected,onChange:D,className:"mt-1 block w-full",required:!0,menuPortalTarget:document.body,menuPosition:"fixed",isDisabled:c})}),e.jsx(l,{label:"Address",name:"address",children:e.jsx(m,{name:"address",value:w,isDisabled:!0,className:"mt-1 block w-full",placeholder:"Organization address..."})}),e.jsx(l,{label:"PIC",name:"pic",error:r.contact,isPrimary:!0,children:e.jsx(u,{options:j(p),value:n.contactSelected,onChange:T,className:"mt-1 block w-full",required:!0,menuPortalTarget:document.body,menuPosition:"fixed",isDisabled:c})}),e.jsx(l,{label:"Phone",name:"phone",children:e.jsx(m,{name:"phone",value:P,isDisabled:!0,className:"mt-1 block w-full",placeholder:"PIC phone..."})}),e.jsx(l,{label:"Check In",name:"check_in",error:r.check_in,isPrimary:!0,children:e.jsx(g,{minDate:d==="Create"?new Date:"",value:n.check_in,onChange:t=>{const a=v(t);s("check_in",a=="1970-01-01"?"":a)},className:"mt-1 block w-full",name:"check_in",placeholder:"Check In...",required:!0,withTime:!1,isDisable:c})}),e.jsx(l,{label:"Check Out",name:"check_out",error:r.check_out,isPrimary:!0,children:e.jsx(g,{minDate:d==="Create"?new Date:"",value:n.check_out,onChange:t=>{const a=v(t);s("check_out",a=="1970-01-01"?"":a)},className:"mt-1 block w-full",name:"check_in",placeholder:"Check Out...",required:!0,withTime:!1,isDisable:c})}),e.jsx(l,{label:"Event",name:"event",error:r.event,isPrimary:!0,children:e.jsx(u,{options:y,value:n.eventSelected,onChange:q,className:"mt-1 block w-full",required:!0,menuPortalTarget:document.body,menuPosition:"fixed",isDisabled:c})}),e.jsx(l,{label:"Room",name:"room",error:r.room,isPrimary:!0,children:e.jsx(u,{options:z,value:n.roomSelected,onChange:N,className:"mt-1 block w-full",required:!0,menuPortalTarget:document.body,menuPosition:"fixed",isDisabled:c})}),e.jsx(l,{label:"Attendance",name:"attendance",error:r.attendance,isPrimary:!0,required:!0,children:e.jsx(m,{name:"attendance",type:"text",value:n.attendance||"",className:"mt-1 block w-full",required:!0,autoComplete:"attendance",placeholder:"Estimated Attendance...",pattern:"^[0-9]{0,10}$",onChange:_,isDisabled:c})}),e.jsx(l,{label:"Payment",name:"payment",error:r.payment,isPrimary:!0,children:e.jsx(u,{options:[{value:"cash",label:"Cash"},{value:"transfer",label:"Transfer"}],value:n.paymentSelected,onChange:I,className:"mt-1 block w-full",required:!0,menuPortalTarget:document.body,menuPosition:"fixed",isDisabled:c})}),e.jsx(l,{label:"Sales",name:"sales",children:e.jsx(m,{name:"sales",value:C.fullname,isDisabled:!0,className:"mt-1 block w-full"})})]})}export{O as default};

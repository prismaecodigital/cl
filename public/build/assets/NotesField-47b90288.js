import{j as e}from"./app-66a2c661.js";import{F as u}from"./FieldGroup-fbb64179.js";import{S as P}from"./react-select.esm-c59424fd.js";import{T as f}from"./TextInput-a083b950.js";import{T as _}from"./TextArea-e01ace18.js";import{D as N}from"./DateTimePicker-5f6ffdc5.js";import{P as x,C as j,F as y}from"./DateFormatFlatpickr-8eecee38.js";import{c as C}from"./convertOptions-49a86ad9.js";import{c as $}from"./createLucideIcon-2e9d75c9.js";import{T as S}from"./trash-2-e45ac675.js";import"./sweetalert2-react-content.es-9259e178.js";/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T=$("PackageMinus",[["path",{d:"M16 16h6",key:"100bgy"}],["path",{d:"M21 10V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l2-1.14",key:"e7tb2h"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}]]);/**
 * @license lucide-react v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=$("PackagePlus",[["path",{d:"M16 16h6",key:"100bgy"}],["path",{d:"M19 13v6",key:"85cyf1"}],["path",{d:"M21 10V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l2-1.14",key:"e7tb2h"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}]]);function M(n){if(!n)return"";const d=n.toString();let m="",h=0;for(let r=d.length-1;r>=0;r--)m=d[r]+m,h++,h%3===0&&r!==0&&(m="."+m);return m}function B({data:n,setData:d,errors:m,selectOption:h,readOnly:r=!1}){const{packages:p}=h,o=t=>{const s=t([...n.notes]);d("notes",s)},k=()=>{o(t=>[...t,{start_date:"",end_date:"",lists:[{package:"",packageSelected:"",uom:"",qty:"",price:"",note:""}]}])},v=async t=>{await j()&&o(i=>i.filter((l,c)=>c!==t))},g=t=>{o(s=>(s[t].lists.push({package:"",packageSelected:"",qty:"",price:"",note:""}),s))},w=async(t,s)=>{await j()&&o(l=>(l[t].lists=l[t].lists.filter((c,a)=>a!==s),l))},D=(t,s,i)=>{var c;const l=((c=p.find(a=>a.id===t.value))==null?void 0:c.uom)||"";o(a=>(a[s].lists[i].package=t.value,a[s].lists[i].packageSelected=t,a[s].lists[i].uom=l,a))};return e.jsxs("div",{className:"content-box mb-2 z-0",children:[e.jsxs("div",{className:"flex flex-row items-center justify-between gap-2 mb-3",children:[e.jsx("h2",{className:"text--sub-heading",children:"Notes"}),!r&&e.jsx("span",{className:"btn btn--sm btn--primary",onClick:k,children:e.jsx(x,{strokeWidth:3,size:16})})]}),n.notes.map((t,s)=>e.jsxs("div",{className:"py-4 px-4 mb-4 shadow-md rounded-md border border-slate-200",children:[e.jsxs("div",{className:"flex flex-row gap-2 items-start",children:[e.jsx(u,{label:"Start Date",name:`notes.${s}.start_date`,error:m[`notes.${s}.start_date`],className:"flex-1 !mb-0",children:e.jsx(N,{minDate:n.check_in,maxDate:n.check_out,name:`notes.${s}.start_date`,value:t.start_date,onChange:i=>{o(l=>(l[s].start_date=y(i),l))},className:"mt-1 block w-full",placeholder:"Start Date...",withTime:!1,isDisable:r})}),e.jsx(u,{label:"End Date",name:`notes.${s}.end_date`,error:m[`notes.${s}.end_date`],className:"flex-1 !mb-0",children:e.jsx(N,{minDate:n.check_in,maxDate:n.check_out,name:`notes.${s}.end_date`,value:t.end_date,onChange:i=>{o(l=>(l[s].end_date=y(i),l))},className:"mt-1 block w-full",placeholder:"End Date...",withTime:!1,isDisable:r})})]}),e.jsx("div",{className:"flex justify-end my-2",children:!r&&e.jsxs("span",{className:"btn btn--sm btn--success py-3",onClick:()=>g(s),children:[e.jsx(q,{className:"inline-block mb-1",strokeWidth:3,size:18})," Add Package"]})}),t.lists.map((i,l)=>e.jsxs("div",{className:"flex flex-col shadow-md rounded-md border border-slate-200 bg-gray-50 p-4 mb-3",children:[e.jsxs("div",{className:"flex flex-row gap-2",children:[e.jsx(u,{label:"Packages",name:`notes.${s}.lists.${l}.package`,error:m[`notes.${s}.lists.${l}.package`],className:"flex-[1-1-33.333333%] w-1/3",children:e.jsx(P,{options:C(p),value:i.packageSelected,className:"mt-1 block w-full",menuPortalTarget:document.body,menuPosition:"fixed",onChange:c=>D(c,s,l),isDisabled:r})}),e.jsx(u,{label:"Qty",name:`notes.${s}.lists.${l}.qty`,error:m[`notes.${s}.lists.${l}.qty`],className:"flex-[1-1-16.666667%] w-1/6",children:e.jsx(f,{id:`notes.${s}.lists.${l}.qty`,name:`notes.${s}.lists.${l}.qty`,className:"mt-1 block w-full",value:i.qty,autoComplete:"name",placeholder:"Qty...",onChange:c=>{o(a=>(a[s].lists[l].qty=c.target.value,a))},isDisabled:r})}),e.jsx(u,{label:"Unit",name:"unit",className:"flex-[1-1-16.666667%] w-1/6",children:e.jsx(f,{value:i.uom||"",isDisabled:!0,className:"mt-1 block w-full",placeholder:"Unit..."})}),e.jsxs("div",{className:"flex-[1-1-33.333333%] w-1/3",children:[e.jsx("label",{className:"form--label",htmlFor:`notes.${s}.lists.${l}.price`,children:"Price"}),e.jsxs("div",{className:"flex items-end",children:[e.jsx("span",{className:"rounded-l-md px-3 py-2 bg-gray-100 border border-gray-300 text-gray-500",children:"Rp."}),e.jsx(u,{error:m[`notes.${s}.lists.${l}.price`],className:"flex-1 !mb-0",children:e.jsx(f,{type:"number",id:`notes.${s}.lists.${l}.price`,name:`notes.${s}.lists.${l}.price`,className:"mt-1 block w-full !rounded-l-none !rounded-r-md",value:i.priceValue,placeholder:"Package Price...",onChange:c=>{const a=c.target.value.replace(/\./g,"");o(b=>(b[s].lists[l].price=a,b[s].lists[l].priceValue=M(a),b))},isDisabled:r})})]})]})]}),e.jsx(u,{label:"Notes",name:`notes.${s}.lists.${l}.note`,error:m[`notes.${s}.lists.${l}.note`],className:"!mb-0",children:e.jsx(_,{id:`notes.${s}.lists.${l}.note`,name:`notes.${s}.lists.${l}.note`,className:"mt-1 block w-full",value:i.note,placeholder:"Package Note...",onChange:c=>{o(a=>(a[s].lists[l].note=c.target.value,a))},isDisabled:r})}),!r&&e.jsxs("span",{className:"btn btn--sm btn--danger py-3 mt-4 inline-block max-w-fit flex-none",onClick:()=>w(s,l),children:[e.jsx(T,{strokeWidth:3,size:18,className:"mb-1 inline-block"})," Delete Package"]})]},l)),!r&&e.jsx("div",{className:"flex justify-end",children:e.jsxs("span",{className:"btn btn--sm btn--danger py-3 mt-4",onClick:()=>v(s),children:[e.jsx(S,{strokeWidth:3,size:18,className:"mb-1 inline-block"})," Delete Note"]})})]},s))]})}export{B as default};

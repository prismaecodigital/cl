import{r as b,j as e,W as y}from"./app-d24c5eb2.js";import{F as n}from"./FieldGroup-de18e160.js";import{T as p}from"./TextInput-65f7bbdd.js";import{S as C}from"./react-select.esm-48787787.js";import{L}from"./LoadingButton-be6e30be.js";const P=b.forwardRef(function({isFocused:x=!1,isDisabled:o=!1,onFileChange:m,className:h="",previewStyle:i="",currentPreview:l="",...s},d){const u=d||b.useRef(),[a,g]=b.useState(l),v="w-full cursor-pointer rounded-lg border-[1.5px] border-stroke bg-transparent outline-none transition file:mr-5 file:border-collapse file:cursor-pointer file:border-0 file:border-r file:border-solid file:border-stroke file:bg-whiter file:py-2 file:px-4 file:hover:bg-primary file:hover:bg-opacity-10 focus:border-primary active:border-primary disabled:cursor-default disabled:bg-whiter mt-1",w="w-full rounded-lg border-[1.5px] border-stroke outline-none transition file:mr-5 file:border-collapse file:cursor-pointer file:border-0 file:border-r file:border-solid file:border-stroke file:bg-whiter file:py-2 file:px-4 file:hover:bg-primary file:hover:bg-opacity-10 cursor-default bg-gray-100 text-gray-500 mt-1";b.useEffect(()=>{x&&u.current.focus()},[]);const j=c=>{const t=c.target.files[0];t?(g(URL.createObjectURL(t)),m(t,URL.createObjectURL(t))):m(null,"")},r=()=>{g(""),m(null,""),u.current&&(u.current.value="")};return e.jsxs(e.Fragment,{children:[e.jsx("input",{...s,type:"file",ref:u,onChange:j,className:`${o?w:v} ${h}`,readOnly:o,disabled:o}),a&&e.jsxs("div",{className:"relative mt-2",children:[e.jsx("img",{src:a,alt:"Preview",className:"w-36 h-auto "+i}),e.jsx("button",{onClick:r,type:"button",className:"absolute top-1 right-1 bg-red-500 text-white rounded-full p-1 shadow hover:bg-red-600 transition",title:"Delete Preview",children:"âœ•"})]})]})});function R({method:f,initialValues:x,routeName:o,roles:m,user:h="",page:i="User"}){const{data:l,setData:s,post:d,put:u,errors:a,processing:g}=y({...x}),v=r=>{const c=r.map(t=>t.value);s(t=>({...t,role:c,roleSelected:r}))},w=(r,c)=>{s(t=>({...t,sign:r,signPreview:c}))},j=r=>{r.preventDefault(),f==="post"?d(route(o)):f==="patch"?d(route(o,{user:h,page:i})):f==="put"&&u(route(o,{user:h,page:i}))};return e.jsxs("form",{onSubmit:j,className:"w-full",children:[e.jsx(n,{label:"Username",name:"username",error:a.username,isPrimary:!0,maxLength:"25",valueLength:l.username.length,children:e.jsx(p,{id:"username",name:"username",className:"mt-1 block w-full",value:l.username,isFocused:!0,required:!0,autoComplete:"username",placeholder:"Username...",onChange:r=>s("username",r.target.value)})}),i==="User"&&e.jsx(n,{label:"Role",name:"role",error:a.role,isPrimary:!0,children:e.jsx(C,{id:"role",options:m,value:l.roleSelected,onChange:v,className:"mt-1 block w-full",isMulti:!0,required:!0})}),e.jsx(n,{label:"Fullname",name:"fullname",error:a.fullname,isPrimary:!0,maxLength:"60",valueLength:l.fullname.length,children:e.jsx(p,{id:"fullname",name:"fullname",className:"mt-1 block w-full",value:l.fullname,autoComplete:"fullname",placeholder:"Fullname...",onChange:r=>s("fullname",r.target.value),required:!0})}),e.jsx(n,{label:"Email",name:"email",error:a.email,isPrimary:!0,maxLength:"50",valueLength:l.email.length,children:e.jsx(p,{id:"email",name:"email",type:"email",className:"mt-1 block w-full",value:l.email,autoComplete:"email",placeholder:"User email...",onChange:r=>s("email",r.target.value),required:!0})}),e.jsx(n,{label:"Phone",name:"phone",error:a.phone,isPrimary:!0,maxLength:"16",valueLength:l.phone.length,children:e.jsx(p,{id:"phone",name:"phone",className:"mt-1 block w-full",value:l.phone,autoComplete:"phone",placeholder:"User phone...",onChange:r=>s("phone",r.target.value),required:!0})}),e.jsx(n,{label:"Password",name:"password",error:a.password,isPrimary:!0,children:e.jsx(p,{id:"password",name:"password",type:"password",className:"mt-1 block w-full",value:l.password,autoComplete:"password",placeholder:"User password...",onChange:r=>s("password",r.target.value)})}),i==="User"&&e.jsx(n,{label:"Sign",name:"sign",error:a.sign,children:e.jsx(P,{id:"sign",name:"sign",accept:"image/*",onFileChange:w,currentPreview:l.signPreview})}),e.jsx(L,{type:"submit",disabled:g,children:"Submit"})]})}export{R as default};

import{r as g,j as e,W as y}from"./app-e30449fd.js";import{F as s}from"./FieldGroup-71e0d375.js";import{T as d}from"./TextInput-20f837a2.js";import{S as C}from"./react-select.esm-845be78c.js";import{L}from"./LoadingButton-0706ecd0.js";const P=g.forwardRef(function({isFocused:x=!1,isDisabled:n=!1,onFileChange:u,className:v="",previewStyle:l="",currentPreview:t="",...c},a){const i=a||g.useRef(),[p,f]=g.useState(t),w="w-full cursor-pointer rounded-lg border-[1.5px] border-stroke bg-transparent outline-none transition file:mr-5 file:border-collapse file:cursor-pointer file:border-0 file:border-r file:border-solid file:border-stroke file:bg-whiter file:py-2 file:px-4 file:hover:bg-primary file:hover:bg-opacity-10 focus:border-primary active:border-primary disabled:cursor-default disabled:bg-whiter mt-1",r="w-full rounded-lg border-[1.5px] border-stroke outline-none transition file:mr-5 file:border-collapse file:cursor-pointer file:border-0 file:border-r file:border-solid file:border-stroke file:bg-whiter file:py-2 file:px-4 file:hover:bg-primary file:hover:bg-opacity-10 cursor-default bg-gray-100 text-gray-500 mt-1";g.useEffect(()=>{x&&i.current.focus()},[]);const m=j=>{const h=j.target.files[0];h?(f(URL.createObjectURL(h)),u(h,URL.createObjectURL(h))):u(null,"")},o=()=>{f(""),u(null,""),i.current&&(i.current.value="")};return e.jsxs(e.Fragment,{children:[e.jsx("input",{...c,type:"file",ref:i,onChange:m,className:`${n?r:w} ${v}`,readOnly:n,disabled:n}),p&&e.jsxs("div",{className:"relative mt-2",children:[e.jsx("img",{src:p,alt:"Preview",className:"w-36 h-auto "+l}),e.jsx("button",{onClick:o,type:"button",className:"absolute top-1 right-1 bg-red-500 text-white rounded-full p-1 shadow hover:bg-red-600 transition",title:"Delete Preview",children:"âœ•"})]})]})});function R({method:b,initialValues:x,routeName:n,roles:u,user:v=""}){const{data:l,setData:t,post:c,errors:a,processing:i}=y({...x}),p=r=>{const m=r.map(o=>o.value);t(o=>({...o,role:m,roleSelected:r}))},f=(r,m)=>{t(o=>({...o,sign:r,signPreview:m}))},w=r=>{r.preventDefault(),b==="post"?c(route(n)):b==="patch"&&c(route(n,v))};return e.jsxs("form",{onSubmit:w,className:"w-full",children:[e.jsx(s,{label:"Username",name:"username",error:a.username,isPrimary:!0,maxLength:"25",valueLength:l.username.length,children:e.jsx(d,{id:"username",name:"username",className:"mt-1 block w-full",value:l.username,isFocused:!0,required:!0,autoComplete:"username",placeholder:"Username...",onChange:r=>t("username",r.target.value)})}),e.jsx(s,{label:"Role",name:"role",error:a.role,isPrimary:!0,children:e.jsx(C,{id:"role",options:u,value:l.roleSelected,onChange:p,className:"mt-1 block w-full",isMulti:!0,required:!0})}),e.jsx(s,{label:"Fullname",name:"fullname",error:a.fullname,isPrimary:!0,maxLength:"60",valueLength:l.fullname.length,children:e.jsx(d,{id:"fullname",name:"fullname",className:"mt-1 block w-full",value:l.fullname,autoComplete:"fullname",placeholder:"Fullname...",onChange:r=>t("fullname",r.target.value),required:!0})}),e.jsx(s,{label:"Email",name:"email",error:a.email,isPrimary:!0,maxLength:"50",valueLength:l.email.length,children:e.jsx(d,{id:"email",name:"email",type:"email",className:"mt-1 block w-full",value:l.email,autoComplete:"email",placeholder:"User email...",onChange:r=>t("email",r.target.value),required:!0})}),e.jsx(s,{label:"Phone",name:"phone",error:a.phone,isPrimary:!0,maxLength:"16",valueLength:l.phone.length,children:e.jsx(d,{id:"phone",name:"phone",className:"mt-1 block w-full",value:l.phone,autoComplete:"phone",placeholder:"User phone...",onChange:r=>t("phone",r.target.value),required:!0})}),e.jsx(s,{label:"Password",name:"password",error:a.password,isPrimary:!0,children:e.jsx(d,{id:"password",name:"password",type:"password",className:"mt-1 block w-full",value:l.password,autoComplete:"password",placeholder:"User password...",onChange:r=>t("password",r.target.value)})}),e.jsx(s,{label:"Sign",name:"sign",error:a.sign,children:e.jsx(P,{id:"sign",name:"sign",accept:"image/*",onFileChange:f,currentPreview:l.signPreview})}),e.jsx(L,{type:"submit",disabled:i,children:"Submit"})]})}export{R as default};
